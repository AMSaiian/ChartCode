<div class="w-full justify-items-start">
  <p-button
    severity="secondary"
    icon="pi pi-code"
    [fluid]="true"
    styleClass="w-full! px-3!"
    (onClick)="onIsOpenClick()"
  ></p-button>
</div>

@if (isOpen()) {
  <form [formGroup]="optionsForm" class="flex gap-1">
    <p-floatlabel variant="on">
      <p-select
        size="small"
        formControlName="language"
        [options]="languagesList"
        optionValue="key"
        optionLabel="displayName"
        inputId="language"
      />
      <label for="language">{{ 'EDITOR.CODE.LANGUAGE' | translate }}</label>
    </p-floatlabel>

    <p-floatlabel variant="on">
      <p-select
        size="small"
        formControlName="indentStyle"
        [options]="stylesList"
        optionValue="key"
        optionLabel="label"
        inputId="style"
      />
      <label for="style">{{ 'EDITOR.CODE.STYLE' | translate }}</label>
    </p-floatlabel>

    <p-floatlabel variant="on">
      <p-inputNumber
        size="small"
        class="[&_input]:w-16!"
        formControlName="indentLength"
        inputId="indentLength"
        [min]="1"
        [maxlength]="3"
        fluid="false"
        buttonLayout="horizontal"
      />
      <label for="indentLength">{{ 'EDITOR.CODE.INDENT-LENGTH' | translate }}</label>
    </p-floatlabel>

    <p-toggle-button
      size="small"
      [offLabel]="'EDITOR.CODE.TAB' | translate"
      [onLabel]="'EDITOR.CODE.SPACE' | translate"
      formControlName="useSpaces"
      inputId="useSpaces"
    />
  </form>
  <div class="flex gap-2">
    <p-button
      severity="secondary"
      (onClick)="onOptionsReset()"
    >{{ 'EDITOR.CODE.RESET' | translate }}</p-button>
    <p-button
      severity="primary"
      (onClick)="onCodeExport()"
    >{{ 'EDITOR.CODE.EXPORT' | translate }}</p-button>
  </div>
  <div class="flex flex-col flex-grow w-sm overflow-auto rounded-2xl p-4 bg-white border border-gray-300 code-preview">
    <pre class="font-mono text-sm text-gray-800"><code [innerText]="currentSourceCode | async"></code></pre>
  </div>
}
